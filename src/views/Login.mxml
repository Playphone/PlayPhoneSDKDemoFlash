<?xml version="1.0"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009"
          xmlns:s="library://ns.adobe.com/flex/spark">

    <s:HGroup verticalAlign="middle" top="20">
        <s:Label verticalAlign="middle">Username:</s:Label>
        <s:TextInput id="username" verticalCenter="center">u1002@sample.com</s:TextInput>
    </s:HGroup>
    <s:HGroup verticalAlign="middle">
        <s:Label verticalAlign="middle">Password:</s:Label>
        <s:TextInput id="pass" verticalCenter="center">u1002</s:TextInput>
    </s:HGroup>
    <s:Button id="login" width="100%" click="login_clickHandler(event)" top="20">Login</s:Button>

    <fx:Script><![CDATA[
        import com.casmul.multinet.core.MNSession
        import com.casmul.multinet.core.MNSessionEvent

        private function login_clickHandler(event: MouseEvent): void
        {
            if( MNSession.instance.isLoggedIn )
            {
                MNSession.instance.addEventListener(MNSessionEvent.onSessionStatusChanged, onLogout);
                MNSession.instance.logout();
            }
            else
            {
                MNSession.instance.addEventListener(MNSessionEvent.onDidLogin, onLogin);
                MNSession.instance.loginWithUserLoginAndPassword(username.text, pass.text, false);
            }
        }

        private function onLogin(event: MNSessionEvent): void
        {
            MNSession.instance.removeEventListener(MNSessionEvent.onDidLogin, onLogin);
            if( MNSession.instance.isLoggedIn )
            {
                login.label = "Logout";
            }
        }

        private function onLogout(event: MNSessionEvent): void
        {
            if( !MNSession.instance.isLoggedIn )
            {
                MNSession.instance.removeEventListener(MNSessionEvent.onSessionStatusChanged, onLogout);
                login.label = "Login";
            }
        }
        ]]></fx:Script>
</s:VGroup>
