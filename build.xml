<project name="Build in-page mathcomp" basedir=".">

    <property file="build.properties"/>
    <taskdef resource="flexTasks.tasks" classpath="${FLEX_HOME}/ant/lib/flexTasks.jar"/>

    <target name="compile">

        <delete dir="${out}"/>

        <mxmlc file="${src}/PlayPhoneSDKDemoFlash.mxml"
               output="${out}/${SWFName}"
               debug="true"
               optimize="false"
               incremental="false"
               default-frame-rate="30"
               locale="en_US"
               static-link-runtime-shared-libraries="true">

            <default-size width="320" height="480"/>

            <source-path path-element="${basedir}/src"/>
            <source-path path-element="${ppa_sdk}"/>

            <load-config filename="${FLEX_HOME}/frameworks/airmobile-config.xml"/>

            <include-libraries dir="${ppa_sdk}/res">
                <include name="*.swc"/>
            </include-libraries>

            <include-libraries dir="${ppa_sdk}/NE/bin">
                <include name="*.swc"/>
            </include-libraries>
        </mxmlc>
    </target>

    <target name="create apk" depends="compile">
        <java jar="${adt}" fork="true" failonerror="true">
            <arg value="-package"/>
            <arg value="-target"/>
            <arg value="apk-debug"/>
            <arg value="-storetype"/>
            <arg value="${APK_STORETYPE}"/>
            <arg value="-keystore"/>
            <arg value="${APK_KEYSTORE}"/>
            <arg value="-storepass"/>
            <arg value="123456"/>
            <arg value="${out}/${apk_name}"/>
            <arg value="${src}/PlayPhoneSDKDemoFlash-app.xml"/>
            <arg value="-extdir"/>
            <arg value="${ppa_sdk}/NE/bin"/>
            <arg value="-C"/>
            <arg value="${out}"/>
            <arg value="${out}/${SWFName}"/>
            <arg value="-e"/>
            <arg value="${ppa_sdk}\assets\multinet_boot.html"/>
            <arg value="assets\multinet_boot.html"/>
            <arg value="-e"/>
            <arg value="${ppa_sdk}\assets\multinet_http_error.html"/>
            <arg value="assets\multinet_http_error.html"/>
            <arg value="-e"/>
            <arg value="${ppa_sdk}\assets\loader.gif"/>
            <arg value="assets\loader.gif"/>
            <arg value="-e"/>
            <arg value="${ppa_sdk}\assets\playphone_logo_loading.png"/>
            <arg value="assets\playphone_logo_loading.png"/>
        </java>
    </target>
</project>